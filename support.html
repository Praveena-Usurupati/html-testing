<!--  ----------------------------------------------------------------------  -->
<!--  NOTE: Please add the following <META> element to your page <HEAD>.      -->
<!--  If necessary, please modify the charset parameter to specify the        -->
<!--  character set of your HTML page.                                        -->
<!--  ----------------------------------------------------------------------  -->
<html>
  <body>
    <meta http-equiv="Content-type" content="text/html; charset=UTF-8" />

    <!--  ----------------------------------------------------------------------  -->
    <!--  NOTE: Please add the following <FORM> element to your page.             -->
    <!--  ----------------------------------------------------------------------  -->

    <form
      action="https://breadwinner--staging.sandbox.my.salesforce.com/servlet/servlet.WebToCase?encoding=UTF-8&orgId=00DVA000002ONC1"
      method="POST"
    >
      <input type="hidden" name="orgid" value="00DVA000002ONC1" />
      <input type="hidden" name="retURL" value="http://surya.com" />

      <!--  ----------------------------------------------------------------------  -->
      <!--  NOTE: These fields are optional debugging elements. Please uncomment    -->
      <!--  these lines if you wish to test in debug mode.                          -->
      <!--  <input type="hidden" name="debug" value=1>                              -->
      <!--  <input type="hidden" name="debugEmail"                                  -->
      <!--  value="lmo-developer@breadwinner.com">                                  -->
      <!--  ----------------------------------------------------------------------  -->

      <label for="name">Contact Name</label
      ><input
        id="name"
        maxlength="80"
        name="name"
        size="20"
        type="text"
      /><br />

      <label for="email">Email</label
      ><input
        id="email"
        maxlength="80"
        name="email"
        size="20"
        type="text"
      /><br />

      <label for="phone">Phone</label
      ><input
        id="phone"
        maxlength="40"
        name="phone"
        size="20"
        type="text"
      /><br />

      <label for="subject">Subject</label
      ><input
        id="subject"
        maxlength="80"
        name="subject"
        size="20"
        type="text"
      /><br />

      <label for="description">Description</label
      ><textarea name="description"></textarea><br />

      <input type="hidden" id="external" name="external" value="1" /><br />

      <input type="submit" name="submit" />
    </form>
    <script type="text/javascript">
      var org_id = "";
      var email = "";
      window.onload = () => {
        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        org_id = urlParams.get("SF_Org_id");
        email = urlParams.get("email");
        console.log(org_id);
        console.log(email);
      };
      function initEmbeddedMessaging() {
        try {
          embeddedservice_bootstrap.settings.language = "en_US"; // For example, enter 'en' or 'en-US'

          embeddedservice_bootstrap.init(
            "00Dd2000005oa6P",
            "Github_ESA_Web_Deployment",
            "https://orgfarm-74b26e3b96-dev-ed.develop.my.site.com/ESWGithubESAWebDeploym1734696307380",
            {
              scrt2URL:
                "https://orgfarm-74b26e3b96-dev-ed.develop.my.salesforce-scrt.com",
            }
          );
        } catch (err) {
          console.error("Error loading Embedded Messaging: ", err);
        }
      }
      //Passing Web Context to Prechat - BEGIN

      window.addEventListener("onEmbeddedMessagingReady", (e) => {
        //log event
        console.log("onEmbeddedMessagingReady event triggered");

        //set visible prechat field
        embeddedservice_bootstrap.prechatAPI.setVisiblePrechatFields({
          // List the pre-chat field names with the value and whether
          // it is editable in the pre-chat form.
          User_Email: {
            value: email,
            isEditableByEndUser: true,
          },
        });

        //Set invisible prechat field
        embeddedservice_bootstrap.prechatAPI.setHiddenPrechatFields({
          Org_Id: org_id,
        });
      });
      //Passing Web Context to Prechat - END
    </script>
    <script
      type="text/javascript"
      src="https://orgfarm-74b26e3b96-dev-ed.develop.my.site.com/ESWGithubESAWebDeploym1734696307380/assets/js/bootstrap.min.js"
      onload="initEmbeddedMessaging()"
    ></script>
  </body>
</html>
