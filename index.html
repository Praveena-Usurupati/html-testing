<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support</title>
</head>
<body>
    <h1>
        Breadwinner Support
    </h1>
    <hr/>
    <a id="supportLink" alt="Support" target="_blank">
      <h3>Support</h3>
    </a>
    <script type='text/javascript'>
      var org_id = "";
      window.onload = () => {
        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        org_id = urlParams.get("SF_Org_id");
        console.log(org_id);
      };
      function initEmbeddedMessaging() {
        try {
          embeddedservice_bootstrap.settings.language = 'en_US'; // For example, enter 'en' or 'en-US'
    
          embeddedservice_bootstrap.init(
            '00DIU000003pPbr',
            'BW_Deployment',
            'https://orgfarm-b1c504fdeb-dev-ed.develop.my.site.com/ESWBWDeployment1738231540236',
            {
              scrt2URL: 'https://orgfarm-b1c504fdeb-dev-ed.develop.my.salesforce-scrt.com'
            }
          );
        } catch (err) {
          console.error('Error loading Embedded Messaging: ', err);
        }
      }

       //Passing Web Context to Prechat - BEGIN

       window.addEventListener("onEmbeddedMessagingReady", (e) => {
        //log event
        console.log("onEmbeddedMessagingReady event triggered");

        //Set invisible prechat field
        embeddedservice_bootstrap.prechatAPI.setHiddenPrechatFields({
          sf_org_id: org_id,
        });
      });
      //Passing Web Context to Prechat - END
    </script>
    <script type='text/javascript' src='https://orgfarm-b1c504fdeb-dev-ed.develop.my.site.com/ESWBWDeployment1738231540236/assets/js/bootstrap.min.js' onload='initEmbeddedMessaging()'></script>
</body>
</html>